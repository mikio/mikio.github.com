<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />

    <!--[if IE]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></head>script>
    <![endif]-->

        <link href="/misaki-orgmode/atom.xml" rel="alternate" title="Misaki orgmode" type="application/atom+xml" />
    

        <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Josefin+Sans" />
        <link rel="stylesheet" href="http://yandex.st/highlightjs/7.3/styles/github.min.css" />
    

        <link rel="stylesheet" href="/misaki-orgmode/css/main.css" />
    

    <title>日本語の説明</title>
  </head>
  <body>
    <header class="global-header">
      <div class="container site-header">
        <h1><a href="/misaki-orgmode/">Misaki orgmode</a></h1>
        <p>Misaki orgmode is static blog generator for org-mode based on Misaki.</p>
      </div>
    </header>
    <div class="container">
      <article>
  <headr>
    <div class="article-header">
      <h1><a href="">日本語の説明</a></h1>
      <p class="date">2000 12 01</p>
    </div>
  </headr>

  <div class="content">
    <div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. 始め方</a>
<ul>
<li><a href="#sec-1-1">1.1. 必要環境</a></li>
<li><a href="#sec-1-2">1.2. 使い方</a></li>
<li><a href="#sec-1-3">1.3. See also</a></li>
</ul>
</li>
<li><a href="#sec-2">2. 環境設定</a></li>
<li><a href="#sec-3">3. カスタマイズ</a></li>
<li><a href="#sec-4">4. テンプレートの編集</a>
<ul>
<li><a href="#sec-4-1">4.1. org-files</a></li>
<li><a href="#sec-4-2">4.2. html-files</a></li>
</ul>
</li>
<li><a href="#sec-5">5. 本家Misakiとの相違点</a></li>
</ul>
</div>
</div>
<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> 始め方</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> 必要環境</h3>
<div class="outline-text-3" id="text-1-1">
<p>
下記の最新版をあらかじめインストールしておいてください。
</p>

<ul class="org-ul">
<li><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Java(JRE)</a>
</li>
<li><a href="https://github.com/technomancy/leiningen">Leiningen</a>
</li>
<li><a href="http://www.gnu.org/software/emacs/">Emacs</a>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> 使い方</h3>
<div class="outline-text-3" id="text-1-2">
<p>
まずはコードを落してください。
</p>
<div class="org-src-container">

<pre class="src src-sh">$ git clone git@github.com:mikio/misaki-orgmode.git
$ cd misaki-orgmode
</pre>
</div>

<p>
最初にorgファイルをコンパイルするためのemacsの絶対パスを記述する必要があります。
</p>

<p>
<code>misaki-orgmode/sample/_config.clj</code>
</p>
<pre class="example">
:emacs "/usr/local/bin/emacs"
</pre>

<p>
サンプルデモは下記で実行します。
</p>
<div class="org-src-container">

<pre class="src src-sh">$ lein run sample
</pre>
</div>

<p>
下記にアクセスしてください。
</p>
<ul class="org-ul">
<li><a href="http://localhost:8080">http://localhost:8080</a>
</li>
</ul>

<p>
あとは、下記にあるorgファイルを編集することで、リアルタイムに記事が更新されます。
</p>
<div class="org-src-container">

<pre class="src src-sh">misaki-orgmode/sample/template/posts/*.org
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3"><span class="section-number-3">1.3</span> See also</h3>
<div class="outline-text-3" id="text-1-3">
<ul class="org-ul">
<li><a href="http://liquidz.github.io/misaki/toc/01-getting-started.html">http://liquidz.github.io/misaki/toc/01-getting-started.html</a>
</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> 環境設定</h2>
<div class="outline-text-2" id="text-2">
<p>
サイト全体の設定は、 <code>:site-title, :site-subtitle, twitter-id, disqus-id</code> を変更します。
</p>


<p>
<code>misaki-orgmode/sample/_config.clj</code>
</p>
<div class="org-src-container">

<pre class="src src-clojure">:site {
  :site-title "YOUR SITE NAME"
  :site-subtitle "YOUR SITE DESCRIPTION."
  :your-domain "yoursite.com"
  :twitter-id "YOUR_TIWTTER_ID"
  :disqus-id  "YOUR_DISQUS_ID"
}
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> カスタマイズ</h2>
<div class="outline-text-2" id="text-3">
<p>
<code>misaki-orgmode/sample/_config.clj</code> を編集することでカスタマイズできます。
</p>

<p>
index.htmlにある記事一覧の表示数を変更するには <code>:posts-per-page</code> の数を指定します。
</p>
<pre class="example">
:posts-per-page 2
</pre>

<p>
最近の記事一覧の表示件数を変更するには、 <code>:recent-posts-num</code> を指定します。 
</p>
<pre class="example">
:recent-posts-num 2
</pre>

<p>
記事のURLは、デフォルトでは "/" で始まりますが、これを変更したい場合は、 <code>:url-base</code> を変更します。
</p>
<pre class="example">
:url-base "/"
</pre>

<p>
生成される*htmlのファイル名、orgファイル名を修正したい場合は下記を修正します。
</p>
<pre class="example">
:post-filename-regexp #"^(.+)$"
:post-filename-format "＄(year)/＄(month)/＄(day)_＄(filename)"
</pre>
<ul class="org-ul">
<li><code>:post-filename-regexp</code> は、入力するorfファイルの正規表現です。特に理由のない限り変更する必要はありません。
</li>
<li><code>:post-filename-format</code> は、出力されるhtmlファイルのパターンです。 
</li>
</ul>

<p>
ブログ記事以外のページを追加したい場合、下記のディレクトリに追加します(下記は、about.htmlを追加する場合)。
</p>
<div class="org-src-container">

<pre class="src src-sh">misaki-orgmode/sample/template/about.html
</pre>
</div>

<p>
同一サイトのページへのリンクは下記のようにします。
</p>
<div class="org-src-container">

<pre class="src src-sh">&#65284;(root)about.html
</pre>
</div>

<p>
もし追加したページに記事のリストなどを含む場合は、下記にそのページを追加します。
</p>
<pre class="example">
:compile-with-post ["index.html" "archives.html" "atom.xml" "about.html"]
</pre>
</div>
</div>
<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> テンプレートの編集</h2>
<div class="outline-text-2" id="text-4">
</div><div id="outline-container-sec-4-1" class="outline-3">
<h3 id="sec-4-1"><span class="section-number-3">4.1</span> org-files</h3>
<div class="outline-text-3" id="text-4-1">
<p>
記事の内容は、Emacsのorg-modeで記述します。
</p>

<p>
その際、下記のようにヘッダーを記述する必要があります。
@layout, @title, @dateは必須です。
</p>
<pre>
# &#64;layout post
# &#64;title Edit templates
# &#64;date 2014-1-1 
# &#64;tags tag1 tag2 tag3
# &#64;output hoge.html
#+OPTIONS: toc:nil
</pre>

<dl class="org-dl">
<dt> @layout </dt><dd>必須。このファイルのレイアウトとなるテンプレートを指定します。
</dd>
<dt> @title </dt><dd>必須。記事のタイトルを指定します。
</dd>
<dt> @date </dt><dd>必須。記事の日付を指定します。
</dd>
<dt> @tags </dt><dd>必須。記事のタグを指定します。
</dd>
<dt> @output </dt><dd>出力されるhtmlを強制的に変更したい場合に指定します。通常は必要ありません。
</dd>
<dt> #+OPTIONS: </dt><dd>もし目次が必要ならば、 <code>toc:t</code> 、を指定します。
</dd>
</dl>

<p>
記事内で、後述する cuma テンプレートのにアクセスしたい場合は、下記のように <code>#+BEGIN_HTML</code> を使用します。
</p>
<pre>
 &#35;+BEGIN_HTML
 &#36;(hello "world")
 &#35;+END_HTML
</pre>
</div>
</div>

<div id="outline-container-sec-4-2" class="outline-3">
<h3 id="sec-4-2"><span class="section-number-3">4.2</span> html-files</h3>
<div class="outline-text-3" id="text-4-2">
<p>
Misaki org-mode のhtmlには、 <a href="https://github.com/liquidz/cuma">cuma template</a> を使用しています。
</p>
<pre class="example">
├── archives.html ;; 記事アーカイブの一覧
├── atom.xml      ;; for rss.
├── index.html    ;; for top page.
├── layouts
│   ├── layout.html ;; すべてのページのベースとなるレイアウトファイル。
│   ├── post.html   ;; for post file.
│   └── tag.html    ;; タグに属した記事一覧
└── posts
</pre>

<p>
テンプレートからサイト情報にアクセスするためには、 <code>*site*</code> 変数の理解が必要です。
下記を参照してください。
</p>

<ul class="org-ul">
<li><a href="http://liquidz.github.io/misaki/toc/03-edit-template.html">http://liquidz.github.io/misaki/toc/03-edit-template.html</a>
</li>
</ul>
</div>

<ol class="org-ol"><li>サンプル<br/><ol class="org-ol"><li>記事一覧<br/><div class="outline-text-5" id="text-4-2-1-1">
<pre>
&lt;ul&gt;
&#64;(for all-posts)
&lt;li&gt;&lt;a href="&#36;(url)"&gt;&#36;(title)&lt;/a&gt;&lt;/li&gt;
&#64;(end)
&lt;/ul&gt;
</pre>

<ul>
<li><a href="/misaki-orgmode/2099-12/01-getting-started.html">Getting Started</a></li>
<li><a href="/misaki-orgmode/2080-12/02-configuration.html">Configuration</a></li>
<li><a href="/misaki-orgmode/2070-01/03-customization.html">Customization</a></li>
<li><a href="/misaki-orgmode/2060-01/04-edit-templates.html">Edit templates</a></li>
<li><a href="/misaki-orgmode/2050-12/05-change-spec.html">Difference with Misaki</a></li>
<li><a href="/misaki-orgmode/2000-12/99-readme-ja.html">日本語の説明</a></li>

</ul>
</div>
</li>
<li>タグ一覧<br/><div class="outline-text-5" id="text-4-2-1-2">
<pre>
&lt;ul&gt;
&#64;(for all-tags)
  &lt;li&gt;&lt;a href="&#36;(url)"&gt;&#36;(name)(&#36;(count))&lt;/a&gt;&lt;/li&gt;
&#64;(end)
&lt;/ul&gt;
</pre>

<ul>
  <li><a href="/misaki-orgmode/tag/tag1.html">tag1(3)</a></li>
  <li><a href="/misaki-orgmode/tag/tag2.html">tag2(3)</a></li>
  <li><a href="/misaki-orgmode/tag/tag3.html">tag3(2)</a></li>

</ul>
</div>
</li></ol>
</li>

<li>カスタム関数<br/><div class="outline-text-4" id="text-4-2-2">
<p>
cumaにはロジックを記述できません。なにか特別なことがしたい場合は、
clojureの関数を定義することで、cumaからアクセスできます。
そのためには <code>misaki-orgmode/sample/extension.clj</code> に関数を定義します。
</p>
<div class="org-src-container">

<pre class="src src-clojure">(defn hello
  [data s]
  (str/upper-case (str "hello " s "!!!")))
</pre>
</div>

<p>
下記のように呼び出します。
</p>
<pre>
  &#36;(hello "world") => hello world
</pre>
HELLO WORLD!!!
</div>
</li></ol>
</div>
</div>


<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> 本家Misakiとの相違点</h2>
<div class="outline-text-2" id="text-5">
<p>
いくつか仕様変更があります。
</p>

<ul class="org-ul">
<li>記事オプション
<dl class="org-dl">
<dt> @output </dt><dd>$rootを外した、htmlファイルの出力ファイル名。これを指定することで、出力ファイル名を強制的に変更できます。
</dd>
<dt> @date </dt><dd>本家では、現在日時(コンパイルした時の時間)が設定されるが、Misaki-orgomodeでは、記事の日付になります。
</dd>
</dl>
</li>
<li><code>*site*</code> 変数
<dl class="org-dl">
<dt> :post-sort-type :date-desc </dt><dd>今のところ記事の日付の降順しかサポートしていません。
</dd>
<dt> date </dt><dd>記事オプションの <code>@date</code> を導入したため、もともとあった date の意味(現在日時) は使用できなくなりました。
</dd>
<dt> now-date </dt><dd>現在日付はこの変数でアクセスできます。
</dd>
</dl>
</li>
</ul>
</div>
</div>
  </div>

  <footer class="article-footer">
    <nav class="tag">
      <ul>
                <li><span><a href="/misaki-orgmode/tag/tag1.html">tag1</a></span></li>
        
      </ul>
    </nav>
    <nav>
      <ul class="pager">
                <li class="prev"><a href="/misaki-orgmode/2050-12/05-change-spec.html">&laquo; Difference with Misaki</a></li>
        
        &nbsp;&nbsp;
        
      </ul>
    </nav>
  </footer>

  <div id="disqus_thread"></div>
  <script type="text/javascript">
   /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
   var disqus_shortname = 'foomikiokunblog';

   /* * * DON'T EDIT BELOW THIS LINE * * */
   (function() {
     var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
     dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
     (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
   })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

</article>
    </div>
        <script type="text/javascript" src="/misaki-orgmode/js/highlight.pack.js"></script>
        <script type="text/javascript" src="/misaki-orgmode/js/main.js"></script>
    
    <footer class="global-footer">
      <div class="container">
        <div class="column">
          <div class="w50per">
            <h2>Tags</h2>
            <ul>
                            <li><a href="/misaki-orgmode/tag/tag1.html">tag1(3)</a></li>
                            <li><a href="/misaki-orgmode/tag/tag2.html">tag2(3)</a></li>
                            <li><a href="/misaki-orgmode/tag/tag3.html">tag3(2)</a></li>
              
            </ul>
          </div>
          <div>
            <h2><a href="/misaki-orgmode/archives.html">Recnet posts</a></h2>
            <ul>
                            <li><a href="/misaki-orgmode/2099-12/01-getting-started.html">Getting Started</a></li>
                            <li><a href="/misaki-orgmode/2080-12/02-configuration.html">Configuration</a></li>
              
            </ul>
            <h2>Search</h2>
            <form action="http://google.com/search" method="get">
              <input type="hidden" name="q" value="site:mikio.github.io">
              <input class="search" type="text" name="q" results="0" placeholder="Search">
            </form>
          </div>
        </div>
        <div class="misaki-logo">
          <p>
            <a href="https://github.com/mikio/misaki-orgmode" title="generated by Misaki orgmode">
              <img src="/misaki-orgmode/img/misaki-orgmode-banner.png"/></a>
              <a href="https://github.com/liquidz/misaki" title="based on Misaki">
                <img src="/misaki-orgmode/img/misaki-banner.png"/></a></p>
          <p><a href="http://twitter.com/mikio_kun">@mikio_kun</a> 2014</p>
        </div>
      </div>
    </footer>
  </body>
</html>